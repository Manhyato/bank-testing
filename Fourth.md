# Отчет о тестировании веб-приложения банка «F-Bank»

**Дата тестирования:** 08.06.2025
**Тестировщик:** Ермаков Алексей
**URL для тестирования:** [http://localhost:8000/?balance=30000\&reserved=20001](http://localhost:8000/?balance=30000&reserved=20001)


## Тест 1: Некорректная позиция курсора при редактировании номера карты

### Цель: Проверить удобство редактирования уже введенного номера карты.

#### Шаги для воспроизведения
1. Открыть URL: `http://localhost:8000/?balance=30000&reserved=20001`
2. Нажать на рублёвый счёт.
3. Ввести 16 цифр в поле номера карты, например `1111222233334444`. Поле отформатирует его в `1111 2222 3333 4444`.
4. Установить курсор в середину номера, например, после `1111`.
5. Нажать клавишу Backspace, чтобы удалить цифру номера.

#### Ожидаемый результат
- Курсор остается на той же позиции, позволяя продолжить редактирование с этого места.

#### Фактический результат
- После нажатия Backspace и автоматического переформатирования строки курсор перемещается в конец поля ввода.

#### Влияние
- Редактирование номера крайне неудобно.

#### Рекомендации по исправлению
- Реализовать один из двух вариантов редактирования:
  - Позволить пользователю редактировать часть номера из любого места (целиком или в группе из 4-х цифр)
  - При попытке редактирования номера карты принудительно перемещать курсор в конец поля ввода перед редактированием.


## Тест 2: Проверка копирования и вставки отформатированного и неотформатированного номера карты

### Цель: Проверить, как система обработает номер карты, скопированный из другого источника вместе с пробелами и без.

#### Шаги для воспроизведения
1. Скопировать в буфер обмена номер карты с пробелами и без, например: `4000123456789010` и `4000 1234 5678 9010`.
2. Открыть URL: `http://localhost:8000/?balance=30000&reserved=20001`
3. Нажать на рублёвый счёт.
4. Вставить скопированное значение в поле для ввода номера карты.

#### Ожидаемый результат
- Приложение должно корректно обработать номер в своем стандартном виде (`4000 1234 5678 9010`).

#### Фактический результат
- Система успешно справляется с задачей: номер форматируется, дальнейший сценарий доступен.

#### Статус
PASS


## Тест 3: Проверка поведения интерфейса при нулевом балансе

### Цель: Проверить, что приложение не позволяет начать перевод, если баланс счета изначально равен нулю.

#### Шаги для воспроизведения
1. Открыть URL с нулевым балансом: http://localhost:8000/?balance=0&reserved=0.
2. Выбрать рублевый счет.
3. Ввести корректный номер карты.
4. Попытаться ввести любую положительную сумму в поле перевода.

#### Ожидаемый результат
- Сразу после ввода номера карты и суммы должно появиться сообщение "Недостаточно средств на счете". 
- Кнопка "Перевести" не должна появляться.

#### Фактический результат
- Сообщение о недостаточности средств отображается сразу, кнопка перевода недоступна.

#### Статус
PASS


### Тест 4: Некорректная обработка дробных чисел (копеек) в сумме перевода

### Цель: Убедиться, что система корректно обрабатывает ввод дробных чисел (копеек) в поле суммы перевода.

## Шаги для воспроизведения
1. Открыть URL `http://localhost:8000/?balance=20000.75&reserved=0`.
2. Нажать на рублёвый счёт.
3. Ввести корректный номер карты: `1234567812345678`
4. В поле "Сумма перевода" скопировать из буфера обмена или ввести `150.50`

#### Ожидаемый результат
- Система должна либо принять сумму `150.50`, либо выдать ошибку о недопустимом формате.

#### Фактический результат
- Приложение молча удаляет точку. 
- Введенное значение 150.50 превращается в 15050.

#### Влияние
- Пользователь производит перевод на некорректную сумму, значительно кратную желаемой.

#### Рекомендации по исправлению
- Реализовать ввод дробных значений валюты с точностью до сотых.

#### Статус
FAIL


## Тест 5: Потеря точности при обработке больших сумм на счетах

### Цель: Проверить, как система обрабатывает и отображает очень большие суммы на счетах, превышающие безопасный лимит для целочисленных расчетов в JavaScript.

#### Шаги для воспроизведения
1. Открыть приложение с URL-параметром, устанавливающим баланс на сумму `9'007'199'254'740'993`, незначительно превышающую максимальное безопасное целое число в JavaScript (`9007199254740991`).
2. Проверить значение поля Баланс.

#### Ожидаемый результат
- На странице должен отображаться точный баланс, указанный в URL: `9'007'199'254'740'993`

#### Фактический результат
- Отображаемый на странице баланс равен `9'007'199'254'740'992`

#### Влияние
- Система молча теряет 1 рубль из-за ограничений типа данных Number в JavaScript (стандарт IEEE 754), который не может точно представлять целые числа свыше Number.MAX_SAFE_INTEGER. Любые расчеты с таким "неточным" балансом будут приводить к неверным результатам.

#### Рекомендации по исправлению
- Необходимо перейти на использование специализированных библиотек для работы с высокоточными десятичными числами
- Альтернативный подход — вести все расчеты в наименьших денежных единицах (копейках), используя целочисленные типы данных (например, BigInt в JavaScript, если среда выполнения это позволяет).

#### Статус
FAIL
